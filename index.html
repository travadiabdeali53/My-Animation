<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Interactive Bouncing Ball</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <style>
    html, body {
      margin: 0;
      padding: 0;
      overflow: hidden;
      height: 100%;
    }
    canvas {
      display: block;
    }
  </style>
</head>
<body>
<canvas id="canvas"></canvas>
<audio id="bounceSound" src="https://cdn.pixabay.com/download/audio/2022/03/15/audio_1a4e31023a.mp3?filename=light-pop-110877.mp3" preload="auto"></audio>

<script>
  const canvas = document.getElementById("canvas");
  const ctx = canvas.getContext("2d");

  function resizeCanvas() {
    canvas.width = window.innerWidth;
    canvas.height = window.innerHeight;
  }
  window.addEventListener("resize", resizeCanvas);
  resizeCanvas();

  const ball = {
    x: canvas.width / 2,
    y: canvas.height / 4,
    radius: 35,
    dx: 4,
    dy: 0,
    gravity: 0.5,
    bounce: -0.75,
    isDragging: false,
    touchedGroundLastFrame: false,
    isStable: false
  };

  const splashDrops = [];
  const flowers = [];
  const birds = [];
  const bounceSound = document.getElementById("bounceSound");

  // Generate random flowers
  for (let i = 0; i < 30; i++) {
    flowers.push({
      x: Math.random() * canvas.width,
      y: canvas.height - 100 + Math.random() * 60,
      color: `hsl(${Math.random() * 360}, 70%, 60%)`
    });
  }

  // Generate flying birds
  for (let i = 0; i < 5; i++) {
    birds.push({
      x: Math.random() * canvas.width,
      y: 50 + Math.random() * 100,
      dx: 1 + Math.random() * 1.5
    });
  }

  let sunAngle = 0;

  function drawNaturalBackground() {
    // Sky gradient
    const sky = ctx.createLinearGradient(0, 0, 0, canvas.height);
    sky.addColorStop(0, "#a0d8ef"); // Light blue sky
    sky.addColorStop(1, "#ffffff");
    ctx.fillStyle = sky;
    ctx.fillRect(0, 0, canvas.width, canvas.height);

    // Sun with rays
    const sunX = canvas.width - 100;
    const sunY = 100;
    const sunRadius = 50;

    ctx.save();
    ctx.translate(sunX, sunY);
    ctx.rotate(sunAngle);
    for (let i = 0; i < 12; i++) {
      ctx.beginPath();
      ctx.moveTo(0, 0);
      ctx.lineTo(0, sunRadius + 20);
      ctx.strokeStyle = "rgba(255, 215, 0, 0.5)";
      ctx.lineWidth = 4;
      ctx.rotate(Math.PI / 6);
      ctx.stroke();
    }
    ctx.restore();

    ctx.beginPath();
    ctx.arc(sunX, sunY, sunRadius, 0, Math.PI * 2);
    ctx.fillStyle = "#FFD700";
    ctx.shadowColor = "#FFD700";
    ctx.shadowBlur = 30;
    ctx.fill();
    ctx.shadowBlur = 0;

    sunAngle += 0.01;

    // Birds
    birds.forEach(bird => {
      ctx.beginPath();
      ctx.moveTo(bird.x, bird.y);
      ctx.lineTo(bird.x + 10, bird.y - 5);
      ctx.lineTo(bird.x + 20, bird.y);
      ctx.strokeStyle = "#333";
      ctx.lineWidth = 2;
      ctx.stroke();

      bird.x += bird.dx;
      if (bird.x > canvas.width + 20) {
        bird.x = -20;
        bird.y = 50 + Math.random() * 100;
      }
    });

    // Grass
    ctx.fillStyle = "#5cb85c";
    ctx.fillRect(0, canvas.height - 100, canvas.width, 100);

    // Flowers
    flowers.forEach(flower => {
      ctx.beginPath();
      ctx.arc(flower.x, flower.y, 3, 0, Math.PI * 2);
      ctx.fillStyle = flower.color;
      ctx.fill();
    });
  }

  function drawBall() {
    const gradient = ctx.createRadialGradient(ball.x - 10, ball.y - 10, 10, ball.x, ball.y, ball.radius);
    gradient.addColorStop(0, "#ff4e50");
    gradient.addColorStop(1, "#f9d423");

    ctx.beginPath();
    ctx.arc(ball.x, ball.y, ball.radius, 0, Math.PI * 2);
    ctx.fillStyle = gradient;
    ctx.shadowColor = "rgba(255, 50, 50, 0.5)";
    ctx.shadowBlur = 20;
    ctx.fill();
    ctx.closePath();
  }

  function createSplash() {
    for (let i = 0; i < 20; i++) {
      splashDrops.push({
        x: ball.x + (Math.random() - 0.5) * ball.radius * 1.5,
        y: canvas.height - 100,
        radius: Math.random() * 2 + 1,
        dx: (Math.random() - 0.5) * 4,
        dy: -(Math.random() * 3 + 1),
        alpha: 1
      });
    }
  }

  function updateSplashes() {
    for (let i = splashDrops.length - 1; i >= 0; i--) {
      const drop = splashDrops[i];
      drop.x += drop.dx;
      drop.y += drop.dy;
      drop.dy += 0.2;
      drop.alpha -= 0.02;
      if (drop.alpha <= 0) splashDrops.splice(i, 1);
    }
  }

  function drawSplashes() {
    splashDrops.forEach(drop => {
      ctx.beginPath();
      ctx.arc(drop.x, drop.y, drop.radius, 0, Math.PI * 2);
      ctx.fillStyle = `rgba(0, 150, 255, ${drop.alpha})`;
      ctx.fill();
    });
  }

  function updateBall() {
    if (!ball.isDragging) {
      ball.dy += ball.gravity;
      ball.x += ball.dx;
      ball.y += ball.dy;

      if (ball.x + ball.radius > canvas.width || ball.x - ball.radius < 0) {
        ball.dx *= -1;
      }

      if (ball.y - ball.radius < 0) {
        ball.y = ball.radius;
        ball.dy *= ball.bounce;
      }

      const bottomY = canvas.height - 100 - ball.radius;
      if (ball.y + ball.radius >= canvas.height - 100) {
        ball.y = bottomY;

        if (!ball.touchedGroundLastFrame || Math.abs(ball.dy) > 1) {
          createSplash();
          bounceSound.currentTime = 0;
          bounceSound.play();
        }

        if (Math.abs(ball.dy) < 1) {
          ball.dy = 0;
          ball.dx *= 0.98;
          if (Math.abs(ball.dx) < 0.2) {
            ball.dx = 0;
            ball.isStable = true;
          }
        } else {
          ball.dy *= ball.bounce;
        }

        ball.touchedGroundLastFrame = true;
      } else {
        ball.touchedGroundLastFrame = false;
      }
    }
  }

  function animate() {
    ctx.clearRect(0, 0, canvas.width, canvas.height);
    drawNaturalBackground();
    updateBall();
    updateSplashes();
    drawBall();
    drawSplashes();
    requestAnimationFrame(animate);
  }

  canvas.addEventListener("click", () => {
    ball.dx = (Math.random() - 0.5) * 8;
    ball.dy = -Math.random() * 8 - 6;
    ball.isStable = false;
  });

  animate();
</script>
</body>
</html>
